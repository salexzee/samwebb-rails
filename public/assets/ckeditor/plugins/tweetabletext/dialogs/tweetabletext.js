CKEDITOR.dialog.add("tweetabletextDialog",function(t){return{title:"TweetableText Properties",minWidth:400,minHeight:200,contents:[{id:"tab-basic",label:"Basic Settings",elements:[{type:"text",id:"displaytext",label:"Display Text",validate:CKEDITOR.dialog.validate.notEmpty("Display Text field can not be empty."),setup:function(t){this.setValue(t.getText())},commit:function(t){t.setText(this.getValue())}},{type:"text",id:"tweetabletext",label:"Tweetable Text",validate:CKEDITOR.dialog.validate.notEmpty("Tweetable Text field can not be empty."),setup:function(t){t=t.getAttribute("href").split("?")[1].split("="),this.setValue(decodeURI(t[1]))},commit:function(t){var e="http://twitter.com/intent/tweet?",i=encodeURI(this.getValue()),e=e+("text="+i);t.setAttribute("href",e),t.setAttribute("data-cke-saved-href",e)}}]}],onShow:function(){var e=t.getSelection().getStartElement();"tweetabletext"!==e.getAttribute("class")?(e=t.document.createElement("a"),this.insertMode=!0):this.insertMode=!1,this.element=e,this.insertMode||this.setupContent(this.element)},onOk:function(){var e=this.element,i=this.getValueOf("tab-basic","displaytext"),a=this.getValueOf("tab-basic","tweetabletext"),a=encodeURI(a),n="http://twitter.com/intent/tweet?",s=t.document.createElement("a");s.setAttribute("class","tweetabletext"),s.setAttribute("href",n+("text="+a)),s.setText(i),this.commitContent(e),this.insertMode&&t.insertElement(s)}}});